<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–¶æ¥­æ‹…å½“è€…å•é¡Œ - ãƒ‡ãƒãƒƒã‚°ã‚¬ã‚¤ãƒ‰ v2</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1f2937;
            border-bottom: 3px solid #ef4444;
            padding-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .warning-badge {
            background: #ef4444;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: normal;
        }
        .debug-section {
            background: #fef2f2;
            border: 2px solid #ef4444;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
        }
        .debug-title {
            font-size: 20px;
            font-weight: bold;
            color: #991b1b;
            margin-bottom: 15px;
        }
        .console-command {
            background: #1f2937;
            color: #10b981;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 10px 0;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #3b82f6;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        .copy-btn:hover {
            background: #2563eb;
        }
        .step-list {
            counter-reset: step;
            list-style: none;
            padding: 0;
        }
        .step-item {
            counter-increment: step;
            padding: 20px 0;
            border-bottom: 1px solid #e5e7eb;
            position: relative;
            padding-left: 60px;
        }
        .step-item:before {
            content: counter(step);
            position: absolute;
            left: 0;
            top: 20px;
            background: #ef4444;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
        }
        .step-item:last-child {
            border-bottom: none;
        }
        .expected-output {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 13px;
            margin: 10px 0;
            white-space: pre-wrap;
        }
        .problem-box {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
            padding: 15px;
            margin: 15px 0;
        }
        .solution-box {
            background: #f0fdf4;
            border-left: 4px solid #10b981;
            padding: 15px;
            margin: 15px 0;
        }
        .highlight {
            background: #fbbf24;
            color: #1f2937;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>
            ğŸ” å–¶æ¥­æ‹…å½“è€…å•é¡Œ - ãƒ‡ãƒãƒƒã‚°ã‚¬ã‚¤ãƒ‰ v2
            <span class="warning-badge">æœªè§£æ±º</span>
        </h1>
        
        <div class="debug-section">
            <div class="debug-title">âš ï¸ ç¾åœ¨ã®å•é¡Œ</div>
            <div class="problem-box">
                <strong>ç—‡çŠ¶ï¼š</strong>é€ä¿¡è¨­å®šã‚¿ãƒ–ã§ã€Œé€ä¿¡è€…åï¼ˆæ‹…å½“è€…ï¼‰ã€ã«å…¥åŠ›ã—ãŸåå‰ãŒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«åæ˜ ã•ã‚Œãªã„
            </div>
            <div class="problem-box">
                <strong>æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œï¼š</strong>å…¥åŠ›ã—ãŸæ‹…å½“è€…åãŒã€Œè¦‹ç©å…ƒã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã€Œæ‹…å½“è€…ï¼šã€ã«è¡¨ç¤ºã•ã‚Œã‚‹
            </div>
        </div>

        <div class="debug-section">
            <div class="debug-title">ğŸ› ï¸ ãƒ‡ãƒãƒƒã‚°æ‰‹é †</div>
            <ol class="step-list">
                <li class="step-item">
                    <strong>é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã</strong><br>
                    Chrome: F12 ã¾ãŸã¯ å³ã‚¯ãƒªãƒƒã‚¯ â†’ ã€Œæ¤œè¨¼ã€<br>
                    Consoleã‚¿ãƒ–ã‚’é¸æŠ
                </li>
                
                <li class="step-item">
                    <strong>åˆæœŸå€¤ã‚’ç¢ºèª</strong><br>
                    ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰å¾Œã€ä»¥ä¸‹ã®ãƒ­ã‚°ã‚’ç¢ºèªï¼š
                    <div class="expected-output">=== Initial Values Debug ===
initialQuote.assignee: ï¼ˆå€¤ã‚’ç¢ºèªï¼‰
staffName initial value: ï¼ˆå€¤ã‚’ç¢ºèªï¼‰
companyInfo?.representativeName: ï¼ˆå€¤ã‚’ç¢ºèªï¼‰</div>
                </li>
                
                <li class="step-item">
                    <strong>é€ä¿¡è¨­å®šã‚¿ãƒ–ã§æ‹…å½“è€…åã‚’å…¥åŠ›</strong><br>
                    ã€Œé€ä¿¡è€…åï¼ˆæ‹…å½“è€…ï¼‰ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«åå‰ã‚’å…¥åŠ›<br>
                    ä¾‹ï¼šã€Œå–¶æ¥­æ‹…å½“è€…ã®åå‰ã€
                </li>
                
                <li class="step-item">
                    <strong>çŠ¶æ…‹å¤‰æ›´ãƒ­ã‚°ã‚’ç¢ºèª</strong><br>
                    å…¥åŠ›å¾Œã€ä»¥ä¸‹ã®ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèªï¼š
                    <div class="expected-output">[é€ä¿¡è¨­å®šã‚¿ãƒ–] æ‹…å½“è€…åå¤‰æ›´: å–¶æ¥­æ‹…å½“è€…ã®åå‰
=== staffName Changed Effect ===
New staffName: å–¶æ¥­æ‹…å½“è€…ã®åå‰
Current editedQuote.assignee before update: ï¼ˆå‰ã®å€¤ï¼‰
Updating editedQuote.assignee from: ï¼ˆå‰ã®å€¤ï¼‰ to: å–¶æ¥­æ‹…å½“è€…ã®åå‰
Updated editedQuote: {...}</div>
                </li>
                
                <li class="step-item">
                    <strong>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯</strong><br>
                    ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”Ÿæˆæ™‚ã®ãƒ­ã‚°ã‚’ç¢ºèªï¼š
                    <div class="expected-output">=== Preview Generation Debug ===
1. staffName: å–¶æ¥­æ‹…å½“è€…ã®åå‰
2. editedQuote.assignee: å–¶æ¥­æ‹…å½“è€…ã®åå‰
3. companyInfo?.representativeName: ï¼ˆä¼šç¤¾ä»£è¡¨è€…åï¼‰
4. Final assignee (calculated): å–¶æ¥­æ‹…å½“è€…ã®åå‰
5. Full previewQuote: {...}</div>
                </li>
                
                <li class="step-item">
                    <strong>æ‰‹å‹•ã§ãƒ‡ãƒ¼ã‚¿ã‚’ç¢ºèª</strong><br>
                    Consoleã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œï¼š
                    <div class="console-command">
// ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèª
document.querySelector('#sender-name')?.value
<button class="copy-btn" onclick="copyToClipboard(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                </li>
            </ol>
        </div>

        <div class="debug-section">
            <div class="debug-title">ğŸ’¡ è€ƒãˆã‚‰ã‚Œã‚‹åŸå› </div>
            
            <div class="problem-box">
                <strong>1. åˆæœŸå€¤ãŒç©ºã®å ´åˆ</strong><br>
                æ–°è¦ä½œæˆæ™‚ã« quote.assignee ãŒ undefined ã¾ãŸã¯ç©ºæ–‡å­—åˆ—
            </div>
            
            <div class="problem-box">
                <strong>2. çŠ¶æ…‹ã®åŒæœŸã‚¿ã‚¤ãƒŸãƒ³ã‚°</strong><br>
                useEffect ã®å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ã¨ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”Ÿæˆã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ãšã‚Œ
            </div>
            
            <div class="problem-box">
                <strong>3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼APIã¸ã®ãƒ‡ãƒ¼ã‚¿é€ä¿¡</strong><br>
                ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”Ÿæˆæ™‚ã« assignee ãŒæ­£ã—ãé€ä¿¡ã•ã‚Œã¦ã„ãªã„
            </div>
        </div>

        <div class="debug-section">
            <div class="debug-title">âœ… è¿½åŠ ã®ç¢ºèªã‚³ãƒãƒ³ãƒ‰</div>
            
            <div class="console-command">
// ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã¨ã—ã¦ä¸€æ™‚çš„ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
window.staffName = 'ç”°ä¸­å¤ªéƒ';
// ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å†ç”Ÿæˆ
document.querySelector('[data-tab="preview"]')?.click();
<button class="copy-btn" onclick="copyToClipboard(this)">ã‚³ãƒ”ãƒ¼</button>
            </div>
            
            <div class="console-command">
// React DevToolsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹å ´åˆ
// Components ã‚¿ãƒ–ã§ HtmlQuoteEditor ã‚’æ¢ã—ã€
// props ã¨ state ã‚’ç¢ºèª
<button class="copy-btn" onclick="copyToClipboard(this)">ã‚³ãƒ”ãƒ¼</button>
            </div>
        </div>

        <div class="solution-box">
            <strong>ğŸ”§ ä¸€æ™‚çš„ãªå›é¿ç­–ï¼š</strong><br>
            1. åŸºæœ¬æƒ…å ±ã‚¿ãƒ–ã®ã€Œæ‹…å½“è€…åã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å…¥åŠ›<br>
            2. ãã®å¾Œã€é€ä¿¡è¨­å®šã‚¿ãƒ–ã§ã‚‚åŒã˜åå‰ã‚’å…¥åŠ›<br>
            3. ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ç¢ºèª
        </div>
    </div>

    <script>
        function copyToClipboard(button) {
            const codeBlock = button.parentElement;
            const code = codeBlock.textContent.replace('ã‚³ãƒ”ãƒ¼', '').trim();
            navigator.clipboard.writeText(code).then(() => {
                button.textContent = 'ã‚³ãƒ”ãƒ¼æ¸ˆã¿ï¼';
                setTimeout(() => {
                    button.textContent = 'ã‚³ãƒ”ãƒ¼';
                }, 2000);
            });
        }
    </script>
</body>
</html>