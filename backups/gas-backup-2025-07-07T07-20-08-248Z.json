{
  "scriptId": "1MznJUkM6ki8--le-vwlpG4A3H1-JXsA2TjvDdHSf3aEymrlKmmRCjHV5",
  "files": [
    {
      "name": "appsscript",
      "type": "JSON",
      "source": "{\n  \"timeZone\": \"Asia/Tokyo\",\n  \"exceptionLogging\": \"STACKDRIVER\",\n  \"runtimeVersion\": \"V8\",\n  \"dependencies\": {\n    \"enabledAdvancedServices\": [\n      {\n        \"userSymbol\": \"Drive\",\n        \"serviceId\": \"drive\",\n        \"version\": \"v2\"\n      }\n    ]\n  },\n  \"webapp\": {\n    \"executeAs\": \"USER_DEPLOYING\",\n    \"access\": \"ANYONE_ANONYMOUS\"\n  }\n}",
      "lastModifyUser": {
        "photoUrl": "https://lh3.googleusercontent.com/a-/ALV-UjUjqp2soQrqHXA7eTypQ3UgYwqFnvefijOE5nspPL29Iae4ZHPuZA=h128"
      },
      "createTime": "2025-07-05T18:01:43.226Z",
      "updateTime": "2025-07-06T12:54:20.166Z",
      "functionSet": {}
    },
    {
      "name": "„Ç≥„Éº„Éâ",
      "type": "SERVER_JS",
      "source": "/**\n * AI‰ºöË®à„Ç∑„Çπ„ÉÜ„É† ÂÆåÂÖ®ÁâàOCRÂá¶ÁêÜ„Çπ„ÇØ„É™„Éó„Éà\n * Version: 2.0.0\n * \n * Ê©üËÉΩ:\n * 1. Google Drive„ÅÆ„Éó„ÉÉ„Ç∑„É•ÈÄöÁü•„Åß„É™„Ç¢„É´„Çø„Ç§„É†OCRÂá¶ÁêÜ\n * 2. PDF„Å®ÁîªÂÉè„Éï„Ç°„Ç§„É´„ÅÆOCR\n * 3. Supabase„Å∏„ÅÆËá™Âãï‰øùÂ≠ò\n * 4. „Éï„Ç°„Ç§„É´„ÅÆËá™Âãï„Ç¢„Éº„Ç´„Ç§„Éñ\n * 5. „ÉÜ„Çπ„ÉàÊ©üËÉΩÂÆåÂÇô\n */\n\n// ===== Ë®≠ÂÆö =====\nconst SUPABASE_URL = 'https://clqpfmroqcnvyxdzadln.supabase.co';\nconst SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNscXBmbXJvcWNudnl4ZHphZGxuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2OTc3NDEsImV4cCI6MjA2NzI3Mzc0MX0.CN7Vk_-W7Pn09jvrlVyOlgyguxqgNLs3C-9Bf1UTdTA';\nconst FOLDER_ID = '1X3Q-t8V6xyqfDx1bGxnXCkDUMxlGNptL'; // Áõ£Ë¶ñÂØæË±°„Éï„Ç©„É´„ÉÄID\nconst ARCHIVE_FOLDER_ID = '1bEwOT_swfFWp2m-CI97mgYePDGkFKYgZ'; // „Ç¢„Éº„Ç´„Ç§„ÉñÁî®„Éï„Ç©„É´„ÉÄID\n\n// ===== WebhookÂá¶ÁêÜÔºà„Éó„ÉÉ„Ç∑„É•ÈÄöÁü•Ôºâ =====\nfunction doPost(e) {\n  console.log('„Éó„ÉÉ„Ç∑„É•ÈÄöÁü•„ÇíÂèó‰ø°„Åó„Åæ„Åó„Åü');\n  \n  try {\n    // ÈÄöÁü•„ÇíÂèó„Åë„Åü„ÇâÂ∞ë„ÅóÂæÖÊ©üÔºà„Éï„Ç°„Ç§„É´„ÅÆÂÆåÂÖ®„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„ÇíÂæÖ„Å§Ôºâ\n    Utilities.sleep(2000);\n    \n    // ÊúÄÊñ∞„ÅÆ„Éï„Ç°„Ç§„É´„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶Âá¶ÁêÜ\n    const results = checkAndProcessRecentFiles();\n    \n    return ContentService.createTextOutput(JSON.stringify({\n      success: true,\n      processed: results.length,\n      results: results\n    })).setMimeType(ContentService.MimeType.JSON);\n    \n  } catch (error) {\n    console.error('WebhookÂá¶ÁêÜ„Ç®„É©„Éº:', error);\n    return ContentService.createTextOutput(JSON.stringify({\n      success: false,\n      error: error.toString()\n    })).setMimeType(ContentService.MimeType.JSON);\n  }\n}\n\n// doGet„ÇÇÂÆüË£ÖÔºà„Çπ„ÉÜ„Éº„Çø„ÇπÁ¢∫Ë™çÁî®Ôºâ\nfunction doGet(e) {\n  return ContentService.createTextOutput(JSON.stringify({\n    status: 'OK',\n    message: 'AI‰ºöË®àOCR Web Apps„ÅåÊ≠£Â∏∏„Å´Âãï‰Ωú„Åó„Å¶„ÅÑ„Åæ„Åô',\n    version: '2.0.0',\n    lastCheck: new Date().toISOString()\n  })).setMimeType(ContentService.MimeType.JSON);\n}\n\n// ===== ÊúÄÊñ∞„Éï„Ç°„Ç§„É´„ÅÆÁ¢∫Ë™ç„Å®Âá¶ÁêÜ =====\nfunction checkAndProcessRecentFiles() {\n  console.log('ÊúÄÊñ∞„Éï„Ç°„Ç§„É´„Çí„ÉÅ„Çß„ÉÉ„ÇØ‰∏≠...');\n  \n  const results = [];\n  const processedFiles = PropertiesService.getScriptProperties().getProperty('processedFiles') || '[]';\n  const processedList = JSON.parse(processedFiles);\n  \n  try {\n    // ÈÅéÂéª10ÂàÜÈñì„ÅÆ„Éï„Ç°„Ç§„É´„ÇíÂèñÂæó\n    const tenMinutesAgo = new Date(Date.now() - 10 * 60 * 1000).toISOString();\n    const files = Drive.Files.list({\n      q: `'${FOLDER_ID}' in parents and modifiedDate > '${tenMinutesAgo}' and trashed = false`,\n      maxResults: 20,\n      orderBy: 'modifiedDate desc'\n    });\n    \n    if (!files.items || files.items.length === 0) {\n      console.log('Êñ∞„Åó„ÅÑ„Éï„Ç°„Ç§„É´„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');\n      return results;\n    }\n    \n    console.log(`${files.items.length}ÂÄã„ÅÆ„Éï„Ç°„Ç§„É´„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü`);\n    \n    // ÂêÑ„Éï„Ç°„Ç§„É´„ÇíÂá¶ÁêÜ\n    for (const file of files.items) {\n      if (!processedList.includes(file.id)) {\n        console.log(`Âá¶ÁêÜ‰∏≠: ${file.title}`);\n        \n        const result = processFile(file.id);\n        if (result) {\n          results.push(result);\n          processedList.push(file.id);\n        }\n      }\n    }\n    \n    // Âá¶ÁêÜÊ∏à„Åø„É™„Çπ„Éà„ÇíÊõ¥Êñ∞ÔºàÊúÄÂ§ß100‰ª∂‰øùÊåÅÔºâ\n    if (processedList.length > 100) {\n      processedList.splice(0, processedList.length - 100);\n    }\n    PropertiesService.getScriptProperties().setProperty('processedFiles', JSON.stringify(processedList));\n    \n  } catch (error) {\n    console.error('„Éï„Ç°„Ç§„É´„ÉÅ„Çß„ÉÉ„ÇØ„Ç®„É©„Éº:', error);\n  }\n  \n  return results;\n}\n\n// ===== ÂÄãÂà•„Éï„Ç°„Ç§„É´„ÅÆÂá¶ÁêÜ =====\nfunction processFile(fileId) {\n  try {\n    const file = DriveApp.getFileById(fileId);\n    const fileName = file.getName();\n    const mimeType = file.getMimeType();\n    \n    // PDF„Åæ„Åü„ÅØÁîªÂÉè„Éï„Ç°„Ç§„É´„ÅÆ„ÅøÂá¶ÁêÜ\n    if (!mimeType.includes('pdf') && !mimeType.includes('image')) {\n      console.log(`„Çπ„Ç≠„ÉÉ„Éó: ${fileName} („Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„Éï„Ç°„Ç§„É´„Çø„Ç§„Éó)`);\n      return null;\n    }\n    \n    console.log(`OCRÂá¶ÁêÜÈñãÂßã: ${fileName}`);\n    \n    // OCRÂá¶ÁêÜ\n    const ocrResult = performOCR(fileId);\n    \n    if (ocrResult.success) {\n      // Supabase„Å´‰øùÂ≠ò\n      const saveResult = saveToSupabase(ocrResult.data);\n      \n      if (saveResult.success) {\n        // „Éï„Ç°„Ç§„É´„Çí„Ç¢„Éº„Ç´„Ç§„Éñ\n        archiveFile(fileId, ocrResult.data);\n        \n        return {\n          fileId: fileId,\n          fileName: fileName,\n          success: true,\n          data: saveResult.data\n        };\n      }\n    }\n    \n    return {\n      fileId: fileId,\n      fileName: fileName,\n      success: false,\n      error: ocrResult.error\n    };\n    \n  } catch (error) {\n    console.error('„Éï„Ç°„Ç§„É´Âá¶ÁêÜ„Ç®„É©„Éº:', error);\n    return {\n      fileId: fileId,\n      success: false,\n      error: error.toString()\n    };\n  }\n}\n\n// ===== OCRÂá¶ÁêÜ =====\nfunction performOCR(fileId) {\n  try {\n    const file = DriveApp.getFileById(fileId);\n    const fileName = file.getName();\n    const fileSize = file.getSize();\n    const mimeType = file.getMimeType();\n    \n    let ocrText = '';\n    let confidence = 0.95;\n    \n    // Drive API v2„Çí‰ΩøÁî®„Åó„ÅüOCR\n    try {\n      const resource = {\n        title: fileName + '_OCR_TEMP',\n        mimeType: 'application/vnd.google-apps.document'\n      };\n      \n      const docFile = Drive.Files.copy(resource, fileId, {\n        convert: true,\n        ocr: true,\n        ocrLanguage: 'ja'\n      });\n      \n      if (docFile && docFile.id) {\n        const doc = DocumentApp.openById(docFile.id);\n        ocrText = doc.getBody().getText();\n        Drive.Files.remove(docFile.id);\n      }\n    } catch (apiError) {\n      console.error('Drive API „Ç®„É©„Éº:', apiError);\n      // „Éï„Ç©„Éº„É´„Éê„ÉÉ„ÇØÂá¶ÁêÜ\n      ocrText = `[OCRÂá¶ÁêÜ‰∏≠]\\n„Éï„Ç°„Ç§„É´Âêç: ${fileName}\\nÂá¶ÁêÜÊó•ÊôÇ: ${new Date().toLocaleString('ja-JP')}`;\n      confidence = 0.5;\n    }\n    \n    // „ÉÜ„Ç≠„Çπ„Éà„Åã„ÇâÊÉÖÂ†±„ÇíÊäΩÂá∫\n    const extracted = extractInformation(ocrText, fileName);\n    \n    return {\n      success: true,\n      data: {\n        file_name: fileName,\n        file_size: fileSize,\n        file_type: mimeType,\n        file_url: file.getUrl(),\n        extracted_text: ocrText,\n        confidence: confidence,\n        vendor_name: extracted.vendor,\n        receipt_date: extracted.date,\n        total_amount: extracted.amount,\n        tax_amount: extracted.tax,\n        status: 'completed',\n        company_id: '11111111-1111-1111-1111-111111111111'\n      }\n    };\n    \n  } catch (error) {\n    console.error('OCRÂá¶ÁêÜ„Ç®„É©„Éº:', error);\n    return {\n      success: false,\n      error: error.toString()\n    };\n  }\n}\n\n// ===== ÊÉÖÂ†±ÊäΩÂá∫ =====\nfunction extractInformation(text, fileName) {\n  const result = {\n    vendor: '',\n    date: new Date().toISOString().split('T')[0],\n    amount: 0,\n    tax: 0\n  };\n  \n  try {\n    // „Éô„É≥„ÉÄ„ÉºÂêç„ÅÆÊäΩÂá∫\n    const vendorMatch = text.match(/(?:Ê†™Âºè‰ºöÁ§æ|ÊúâÈôê‰ºöÁ§æ|ÂêàÂêå‰ºöÁ§æ)?[\\u4e00-\\u9fa5\\u30a0-\\u30ff]+(?:Ê†™Âºè‰ºöÁ§æ|Â∫ó|ÂïÜÂ∫ó|„Çπ„Éà„Ç¢)?/);\n    if (vendorMatch) {\n      result.vendor = vendorMatch[0];\n    }\n    \n    // Êó•‰ªò„ÅÆÊäΩÂá∫\n    const dateMatch = text.match(/(\\d{4})[Âπ¥\\/\\-](\\d{1,2})[Êúà\\/\\-](\\d{1,2})Êó•?/);\n    if (dateMatch) {\n      const year = dateMatch[1];\n      const month = dateMatch[2].padStart(2, '0');\n      const day = dateMatch[3].padStart(2, '0');\n      result.date = `${year}-${month}-${day}`;\n    }\n    \n    // ÈáëÈ°ç„ÅÆÊäΩÂá∫\n    const amountMatch = text.match(/[¬•Ôø•]?\\s*([0-9,]+)\\s*ÂÜÜ?/g);\n    if (amountMatch && amountMatch.length > 0) {\n      const amounts = amountMatch.map(m => \n        parseInt(m.replace(/[¬•Ôø•,ÂÜÜ\\s]/g, ''))\n      ).filter(a => !isNaN(a));\n      \n      if (amounts.length > 0) {\n        result.amount = Math.max(...amounts);\n        result.tax = Math.floor(result.amount * 0.1 / 1.1);\n      }\n    }\n    \n    // „Éï„Ç°„Ç§„É´Âêç„Åã„Çâ„ÅÆË£úÂÆå\n    if (!result.vendor && fileName.includes('_')) {\n      const parts = fileName.split('_');\n      if (parts.length >= 3) {\n        result.vendor = parts[2];\n      }\n    }\n    \n  } catch (error) {\n    console.error('ÊÉÖÂ†±ÊäΩÂá∫„Ç®„É©„Éº:', error);\n  }\n  \n  return result;\n}\n\n// ===== Supabase„Å∏„ÅÆ‰øùÂ≠ò =====\nfunction saveToSupabase(data) {\n  try {\n    const url = `${SUPABASE_URL}/rest/v1/ocr_results`;\n    \n    const response = UrlFetchApp.fetch(url, {\n      method: 'POST',\n      headers: {\n        'apikey': SUPABASE_ANON_KEY,\n        'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,\n        'Content-Type': 'application/json',\n        'Prefer': 'return=representation'\n      },\n      payload: JSON.stringify(data)\n    });\n    \n    if (response.getResponseCode() === 201) {\n      const result = JSON.parse(response.getContentText());\n      console.log('Supabase‰øùÂ≠òÊàêÂäü:', result[0].id);\n      return {\n        success: true,\n        data: result[0]\n      };\n    } else {\n      throw new Error(`‰øùÂ≠òÂ§±Êïó: ${response.getResponseCode()}`);\n    }\n    \n  } catch (error) {\n    console.error('Supabase‰øùÂ≠ò„Ç®„É©„Éº:', error);\n    return {\n      success: false,\n      error: error.toString()\n    };\n  }\n}\n\n// ===== „Éï„Ç°„Ç§„É´„ÅÆ„Ç¢„Éº„Ç´„Ç§„Éñ =====\nfunction archiveFile(fileId, ocrData) {\n  try {\n    const file = DriveApp.getFileById(fileId);\n    const archiveFolder = DriveApp.getFolderById(ARCHIVE_FOLDER_ID);\n    \n    // Êñ∞„Åó„ÅÑ„Éï„Ç°„Ç§„É´Âêç„ÇíÁîüÊàê\n    const date = new Date(ocrData.receipt_date || new Date());\n    const dateStr = Utilities.formatDate(date, 'JST', 'yyyyMMdd');\n    const vendor = ocrData.vendor_name || 'unknown';\n    const amount = ocrData.total_amount || 0;\n    \n    const newFileName = `${dateStr}_È†òÂèéÊõ∏_${vendor}_${amount}ÂÜÜ.pdf`;\n    \n    // „Éï„Ç°„Ç§„É´„Çí„Ç≥„Éî„Éº„Åó„Å¶„Ç¢„Éº„Ç´„Ç§„Éñ\n    const copiedFile = file.makeCopy(newFileName, archiveFolder);\n    \n    // ÂÖÉ„ÅÆ„Éï„Ç°„Ç§„É´„ÇíÂâäÈô§\n    file.setTrashed(true);\n    \n    console.log(`„Ç¢„Éº„Ç´„Ç§„ÉñÂÆå‰∫Ü: ${newFileName}`);\n    return true;\n    \n  } catch (error) {\n    console.error('„Ç¢„Éº„Ç´„Ç§„Éñ„Ç®„É©„Éº:', error);\n    return false;\n  }\n}\n\n// ===== „ÉÜ„Çπ„ÉàÈñ¢Êï∞ =====\n\n// 1. APIË®≠ÂÆöÁ¢∫Ë™ç\nfunction checkApiSettings() {\n  console.log('=== APIË®≠ÂÆöÁ¢∫Ë™ç ===');\n  \n  // Drive API v2„ÅÆÁ¢∫Ë™ç\n  try {\n    const testList = Drive.Files.list({ maxResults: 1 });\n    console.log('‚úÖ Drive API v2: Ê≠£Â∏∏');\n  } catch (e) {\n    console.error('‚ùå Drive API v2: Êú™Ë®≠ÂÆö', e.message);\n    console.log('Ëß£Ê±∫ÊñπÊ≥ï: „Çµ„Éº„Éì„Çπ > Drive API „ÇíËøΩÂä†„Åó„Å¶„Åè„Å†„Åï„ÅÑ');\n  }\n  \n  // „Éï„Ç©„É´„ÉÄ„ÉºID„ÅÆÁ¢∫Ë™ç\n  console.log('üìÅ Áõ£Ë¶ñ„Éï„Ç©„É´„ÉÄID:', FOLDER_ID);\n  console.log('üìÅ „Ç¢„Éº„Ç´„Ç§„Éñ„Éï„Ç©„É´„ÉÄID:', ARCHIVE_FOLDER_ID);\n  \n  // SupabaseË®≠ÂÆö„ÅÆÁ¢∫Ë™ç\n  console.log('üîó Supabase URL:', SUPABASE_URL ? 'Ë®≠ÂÆöÊ∏à„Åø' : 'Êú™Ë®≠ÂÆö');\n  console.log('üîë Supabase Key:', SUPABASE_ANON_KEY ? 'Ë®≠ÂÆöÊ∏à„Åø' : 'Êú™Ë®≠ÂÆö');\n}\n\n// 2. ÊâãÂãïOCRÂÆüË°å„ÉÜ„Çπ„Éà\nfunction manualOcrTest() {\n  console.log('=== ÊâãÂãïOCR„ÉÜ„Çπ„ÉàÈñãÂßã ===');\n  \n  // ÊúÄÊñ∞„Éï„Ç°„Ç§„É´„Çí1„Å§Âá¶ÁêÜ\n  const results = checkAndProcessRecentFiles();\n  \n  if (results.length > 0) {\n    console.log('‚úÖ OCRÂá¶ÁêÜÊàêÂäü:', results[0]);\n  } else {\n    console.log('‚ö†Ô∏è Âá¶ÁêÜÂØæË±°„ÅÆ„Éï„Ç°„Ç§„É´„Åå„ÅÇ„Çä„Åæ„Åõ„Çì');\n    console.log('ÊåáÂÆö„Éï„Ç©„É´„ÉÄ„Å´PDF„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');\n  }\n}\n\n// 3. SupabaseÊé•Á∂ö„ÉÜ„Çπ„Éà\nfunction testSupabaseConnection() {\n  console.log('=== SupabaseÊé•Á∂ö„ÉÜ„Çπ„Éà ===');\n  \n  const testData = {\n    company_id: '11111111-1111-1111-1111-111111111111',\n    file_name: 'test_connection_' + new Date().getTime() + '.pdf',\n    file_size: 1024,\n    file_type: 'application/pdf',\n    file_url: 'https://example.com/test.pdf',\n    extracted_text: '„ÉÜ„Çπ„ÉàÊé•Á∂öÁ¢∫Ë™ç',\n    confidence: 0.99,\n    vendor_name: '„ÉÜ„Çπ„ÉàÂ∫óËàó',\n    receipt_date: new Date().toISOString().split('T')[0],\n    total_amount: 1000,\n    tax_amount: 100,\n    status: 'completed'\n  };\n  \n  const result = saveToSupabase(testData);\n  \n  if (result.success) {\n    console.log('‚úÖ SupabaseÊé•Á∂öÊàêÂäü');\n    console.log('‰øùÂ≠ò„Åï„Çå„ÅüID:', result.data.id);\n  } else {\n    console.error('‚ùå SupabaseÊé•Á∂öÂ§±Êïó:', result.error);\n  }\n}\n\n// 4. ÊúÄÊñ∞„Éï„Ç°„Ç§„É´„ÅÆÁ¢∫Ë™ç\nfunction checkRecentFiles() {\n  console.log('=== ÊúÄÊñ∞„Éï„Ç°„Ç§„É´Á¢∫Ë™ç ===');\n  \n  const files = Drive.Files.list({\n    q: `'${FOLDER_ID}' in parents and mimeType = 'application/pdf' and trashed = false`,\n    orderBy: 'createdDate desc',\n    maxResults: 5\n  });\n  \n  if (files.items.length === 0) {\n    console.log('‚ö†Ô∏è PDF„Éï„Ç°„Ç§„É´„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');\n    return;\n  }\n  \n  console.log(`üìÑ ${files.items.length}ÂÄã„ÅÆPDF„Éï„Ç°„Ç§„É´„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü:`);\n  files.items.forEach((file, index) => {\n    console.log(`${index + 1}. ${file.title} (${new Date(file.createdDate).toLocaleString('ja-JP')})`);\n  });\n}\n\n// 5. „Éó„ÉÉ„Ç∑„É•ÈÄöÁü•„ÅÆÂàùÊúüË®≠ÂÆö\nfunction setupPushNotifications() {\n  try {\n    const channelId = Utilities.getUuid();\n    const address = ScriptApp.getService().getUrl();\n    \n    const watchResponse = Drive.Files.watch({\n      id: FOLDER_ID,\n      resource: {\n        id: channelId,\n        type: 'web_hook',\n        address: address,\n        expiration: Date.now() + 86400000 // 24ÊôÇÈñìÂæå\n      }\n    });\n    \n    console.log('„Éó„ÉÉ„Ç∑„É•ÈÄöÁü•Ë®≠ÂÆöÂÆå‰∫Ü:', watchResponse);\n    PropertiesService.getScriptProperties().setProperty('channelId', channelId);\n    \n  } catch (error) {\n    console.error('„Éó„ÉÉ„Ç∑„É•ÈÄöÁü•Ë®≠ÂÆö„Ç®„É©„Éº:', error);\n  }\n}",
      "lastModifyUser": {
        "photoUrl": "https://lh3.googleusercontent.com/a-/ALV-UjUjqp2soQrqHXA7eTypQ3UgYwqFnvefijOE5nspPL29Iae4ZHPuZA=h128"
      },
      "createTime": "2025-07-05T18:01:43.226Z",
      "updateTime": "2025-07-06T12:54:20.166Z",
      "functionSet": {
        "values": [
          {
            "name": "doPost",
            "parameters": [
              "e"
            ]
          },
          {
            "name": "doGet",
            "parameters": [
              "e"
            ]
          },
          {
            "name": "checkAndProcessRecentFiles"
          },
          {
            "name": "processFile",
            "parameters": [
              "fileId"
            ]
          },
          {
            "name": "performOCR",
            "parameters": [
              "fileId"
            ]
          },
          {
            "name": "extractInformation",
            "parameters": [
              "text",
              "fileName"
            ]
          },
          {
            "name": "saveToSupabase",
            "parameters": [
              "data"
            ]
          },
          {
            "name": "archiveFile",
            "parameters": [
              "fileId",
              "ocrData"
            ]
          },
          {
            "name": "checkApiSettings"
          },
          {
            "name": "manualOcrTest"
          },
          {
            "name": "testSupabaseConnection"
          },
          {
            "name": "checkRecentFiles"
          },
          {
            "name": "setupPushNotifications"
          }
        ]
      }
    }
  ]
}