/**
 * Google Apps Script テスト関数実行用スクリプト
 * 
 * このファイルは、GASエディタで実行するテスト関数の説明と
 * 期待される結果を記載しています。
 */

// ==========================================
// テスト1: testOCRManually()
// ==========================================
/**
 * 特定のファイルIDでOCR処理をテスト
 * ファイルID: 1jRto47tshXqWHpMuX06_-Jw4NaEJzt67
 * 
 * 期待される結果:
 * {
 *   fileId: "1jRto47tshXqWHpMuX06_-Jw4NaEJzt67",
 *   fileName: "ファイル名",
 *   success: true,
 *   documentInfo: {
 *     type: "領収書/請求書/納品書など",
 *     vendor: "ベンダー名",
 *     date: "2025-01-06",
 *     year: "2025",
 *     month: "01",
 *     amount: 金額,
 *     taxAmount: 税額
 *   },
 *   supabaseId: "生成されたID"
 * }
 * 
 * エラーの場合:
 * - ファイルが見つからない
 * - OCR処理エラー
 * - Supabase保存エラー
 */

// ==========================================
// テスト2: testLatestFileInFolder()
// ==========================================
/**
 * フォルダ内の最新ファイルでOCR処理をテスト
 * フォルダID: 1dlWqaq_BX5wrcbn4P3LpSOmog2r_hi-9
 * 
 * 期待される結果:
 * - フォルダ内の最新ファイルが処理される
 * - ファイルがアーカイブフォルダに移動される
 * - ファイル名がリネームされる
 * 
 * 確認ポイント:
 * 1. コンソールログで「最新ファイル: [ファイル名] ID: [ファイルID]」が表示
 * 2. OCR結果が正しく抽出されている
 * 3. Supabaseにデータが保存されている
 * 4. ファイルがアーカイブフォルダに移動している
 */

// ==========================================
// テスト3: setupScriptProperties()
// ==========================================
/**
 * スクリプトプロパティを設定（初回のみ実行）
 * 
 * 設定される項目:
 * - SUPABASE_URL
 * - SUPABASE_ANON_KEY
 * - WEBHOOK_URL
 * - FOLDER_ID
 * 
 * 実行後、プロジェクト設定でプロパティが設定されていることを確認
 */

// ==========================================
// テスト4: checkFolderChanges()
// ==========================================
/**
 * フォルダ内の最新10ファイルを一括処理
 * 
 * 期待される結果:
 * - 最大10個のファイルが処理される
 * - 各ファイルのOCR結果が配列で返される
 * - すべてのファイルがアーカイブされる
 * 
 * 注意:
 * - 大量のファイルがある場合は処理時間がかかる
 * - Google Apps Scriptの実行時間制限（6分）に注意
 */

// ==========================================
// デバッグ用コンソール出力の確認方法
// ==========================================
/**
 * 1. GASエディタで「表示」→「ログ」を開く
 * 2. 実行後、ログに以下が表示される:
 *    - 処理開始メッセージ
 *    - ファイル情報
 *    - OCR処理結果
 *    - エラーメッセージ（エラーの場合）
 * 
 * 3. より詳細なログは「表示」→「実行トランスクリプト」で確認
 */

// ==========================================
// よくあるエラーと対処法
// ==========================================
/**
 * 1. "Exception: ファイルが見つかりません"
 *    → ファイルIDが正しいか確認
 *    → ファイルへのアクセス権限を確認
 * 
 * 2. "Exception: Drive APIが有効になっていません"
 *    → GCPコンソールでDrive APIを有効化
 * 
 * 3. "Exception: 実行時間を超過しました"
 *    → 処理するファイル数を減らす
 *    → バッチ処理に分割
 * 
 * 4. "TypeError: Cannot read property"
 *    → スクリプトプロパティが設定されているか確認
 *    → setupScriptProperties()を実行
 */